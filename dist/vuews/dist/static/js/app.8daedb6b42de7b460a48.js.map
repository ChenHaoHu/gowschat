{"version":3,"sources":["webpack:///src/components/chat.vue","webpack:///./src/components/chat.vue?c0f2","webpack:///./src/components/chat.vue","webpack:///src/App.vue","webpack:///./src/App.vue?9fb3","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["chat","name","props","data","p2p","islink","socket","chatlist","value","label","selectChat","chatmsg","chatrecord","computed","wsuri","console","log","location","hostname","port","this","uid","gid","methods","out","close","link","e","WebSocket","alert","onopen","open","onerror","error","onclose","onmessage","getMessage","$message","showClose","message","type","msg","JSON","parse","unshift","from","Uid","to","ToUid","Msg","send","touid","sendtype","stringify_default","destroyed","components_chat","render","_vm","_h","$createElement","_c","_self","attrs","gutter","justify","staticStyle","display","justify-content","width","span","clearable","model","callback","$$v","expression","_v","on","click","staticClass","height","overflow-y","slot","_s","_l","o","text-align","font-size","font-weight","title","closable","_e","active-text","inactive-text","placeholder","staticRenderFns","src_components_chat","__webpack_require__","normalizeComponent","ssrContext","App","dialogFormVisible","form","components","sendNotice","params","FormData","append","parseInt","_axios_0_19_2_axios_default","a","post","then","response","catch","selectortype_template_index_0_src_App","id","$event","visible","update:visible","auto-complete","$set","src_App","App_normalizeComponent","Vue","use","ElementUI","el","h"],"mappings":"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","file":"static/js/app.8daedb6b42de7b460a48.js","sourcesContent":["<template>\n  <div>\n    <div>\n      <el-row :gutter=\"20\" type=\"flex\" justify=\"center\">\n        <el-form style=\"display: flex;justify-content: center;width: 100%\">\n          <el-col :span=\"5\">\n            <el-form-item label=\"UID\">\n              <el-input v-model=\"uid\" clearable>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"Name\">\n              <el-input v-model=\"name\" clearable>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"Gid\">\n              <el-input v-model=\"gid\" clearable>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"4\">\n            <el-form-item label=\"LINK\">\n              <el-button type=\"primary\" @click=\"link\">Link</el-button>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"4\">\n            <el-form-item label=\"CLOSE\">\n              <el-button type=\"primary\" @click=\"out\">OUT</el-button>\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </el-form>\n      </el-row>\n    </div>\n    <el-card class=\"box-card\" style=\"height: 400px;overflow-y:auto;\" >\n      <div slot=\"header\" class=\"clearfix\">\n        <span>聊天窗口 </span>\n        <el-tag type=\"success\" v-if=\"islink\">连接</el-tag>\n        <el-tag type=\"danger\" v-else=\"islink\">未连接</el-tag>\n        <br />\n        <span>uid: {{uid}} / name: {{name}} / gid: {{gid}} </span>\n      </div>\n      <div v-for=\"o in chatrecord\" class=\"text item\" style=\"text-align: left;font-size: 20px;font-weight:600;\">\n        <div v-if=\" o.type=='this'  \">\n          <el-alert :title='\"发送信息给\"+o.to' type=\"success\"  :closable=\"false\">{{o.msg}}\n          </el-alert>\n        </div>\n        <div v-if=\"o.from=='NOTICE'&&  o.type=='that'\">\n          <el-alert :title='\"NOTICE发送信息给\"+o.to' type=\"error\"  :closable=\"false\" >{{o.msg}}\n          </el-alert>\n        </div>\n  <!--       <div v-if=\"o.from==uid &&  o.type=='that'\">\n          <el-alert :title='\"发送信息给\"+o.to' type=\"info\"  :closable=\"false\">{{o.msg}}\n          </el-alert>\n        </div> -->\n        <div v-if=\"o.from != 'NOTICE' &&  o.type=='that'\">\n          <el-alert :title='\"接收来自\"+o.from+\"的信息\"' type=\"warning\"  :closable=\"false\">{{o.msg}}\n          </el-alert>\n        </div>\n      </div>\n    </el-card>\n    <br />\n    <el-switch v-model=\"p2p\" active-text=\"单聊\" inactive-text=\"群发\">\n    </el-switch>\n    <br /> <br />\n    <div>\n      <el-row :gutter=\"20\" type=\"flex\" justify=\"center\">\n        <el-col :span=\"6\" v-if=\"p2p==1\">\n          <el-input placeholder=\"张三？\" v-model=\"selectChat\" clearable>\n          </el-input>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-input placeholder=\"请输入内容\" v-model=\"chatmsg\" clearable>\n          </el-input>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button type=\"primary\" @click=\"send\">发送</el-button>\n          </el-input>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'chat',\n  props:[\"uid\",\"gid\",\"name\"],\n  data() {\n    // var uid = \"uid1\";\n    // var name = \"name1\";\n    // var gid = \"group1\";\n    return {\n      p2p: 0,\n      islink: false,\n      socket: \"\",\n      // uid: \"uid\",\n      // name: \"name\",\n      // gid: \"gid\",\n      chatlist: [{\n        value: '选项1',\n        label: '黄金糕'\n      }, {\n        value: '选项2',\n        label: '双皮奶'\n      }],\n      selectChat: \"\",\n      chatmsg: \"\",\n      chatrecord: []\n    }\n  },\n  computed: {\n    wsuri: function() {\n      console.log(\"ws://\"+location.hostname+\":\"+location.port+\"/ws/\" + this.uid + \",\" + this.name + \",\" + this.gid)\n      return \"ws://\"+location.hostname+\":\"+location.port+\"/ws/\" + this.uid + \",\" + this.name + \",\" + this.gid;\n    }\n  },\n  methods: {\n    out(){\n      this.socket.close()\n    },\n    link: function(e) {\n      if (typeof(WebSocket) === \"undefined\") {\n        alert(\"您的浏览器不支持socket\")\n      } else {\n        if (this.socket != \"\") {\n          this.socket.close()\n        }\n        // 实例化socket\n        this.socket = new WebSocket(this.wsuri)\n        // 监听socket连接\n        this.socket.onopen = this.open\n        // 监听socket错误信息\n        this.socket.onerror = this.error\n        this.socket.onclose = this.close\n        // 监听socket消息\n        this.socket.onmessage = this.getMessage\n      }\n    },\n    open: function() {\n      console.log(\"socket连接成功\")\n      this.islink = true\n      // const h = this.$createElement;\n      this.$message({\n        showClose: true,\n        message: this.wsuri + 'socket连接成功',\n        type: 'success'\n      });\n      // this.$notify({\n      //   title: '连接成功',\n      //   message: h('i', { style: 'color: teal' }, this.wsuri + 'socket连接成功')\n      // });\n    },\n    error: function() {\n      this.islink = false\n      // const h = this.$createElement;\n      // this.$notify({\n      //   title: '连接失败',\n      //   message: h('i', { style: 'color: teal' }, this.wsuri + '连接失败')\n      // });\n      this.$message({\n        showClose: true,\n        message: this.wsuri + '连接失败',\n        type: 'error'\n      });\n    },\n\n    getMessage: function(msg) {\n      console.log(msg.data)\n      var data = JSON.parse(msg.data);\n      this.chatrecord.unshift({\n        from: data.Uid,\n        to: data.ToUid,\n        msg: data.Msg,\n        type:\"that\"\n      })\n\n\n    },\n    send: function() {\n\n    if(this.islink == true){\n        this.chatrecord.unshift({\n        from: this.uid,\n        to: this.selectChat,\n        msg: this.chatmsg,\n        type:\"this\",\n      })\n\n      if (this.p2p == 1) {\n        var data = {\n          touid: this.selectChat,\n          msg: this.chatmsg,\n          sendtype: 0\n        }\n      } else {\n        var data = {\n          touid: this.selectChat,\n          msg: this.chatmsg,\n          sendtype: 1\n        }\n      }\n\n\n      this.socket.send(JSON.stringify(data))\n    }else{\n      this.$message({\n        showClose: true,\n        message: '请先连接',\n        type: 'error'\n      });\n    }\n    },\n    close: function() {\n      this.islink = false\n      console.log(\"socket已经关闭\")\n      // const h = this.$createElement;\n      // this.$notify({\n      //   title: '连接关闭',\n      //   message: h('i', { style: 'color: teal' }, this.wsuri + '连接关闭')\n      // });\n\n      this.$message({\n        showClose: true,\n        message: this.wsuri + '连接关闭',\n        type: 'error'\n      });\n    }\n  },\n  destroyed() {\n    // 销毁监听\n    this.islink = false\n    this.socket.onclose = this.close\n  }\n}\n\n</script>\n<style scoped>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('el-row',{attrs:{\"gutter\":20,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-form',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"width\":\"100%\"}},[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"UID\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.uid),callback:function ($$v) {_vm.uid=$$v},expression:\"uid\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"Name\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"Gid\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.gid),callback:function ($$v) {_vm.gid=$$v},expression:\"gid\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-form-item',{attrs:{\"label\":\"LINK\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.link}},[_vm._v(\"Link\")])],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-form-item',{attrs:{\"label\":\"CLOSE\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.out}},[_vm._v(\"OUT\")])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('el-card',{staticClass:\"box-card\",staticStyle:{\"height\":\"400px\",\"overflow-y\":\"auto\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"聊天窗口 \")]),_vm._v(\" \"),(_vm.islink)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"连接\")]):_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"未连接\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"uid: \"+_vm._s(_vm.uid)+\" / name: \"+_vm._s(_vm.name)+\" / gid: \"+_vm._s(_vm.gid)+\" \")])],1),_vm._v(\" \"),_vm._l((_vm.chatrecord),function(o){return _c('div',{staticClass:\"text item\",staticStyle:{\"text-align\":\"left\",\"font-size\":\"20px\",\"font-weight\":\"600\"}},[( o.type=='this'  )?_c('div',[_c('el-alert',{attrs:{\"title\":\"发送信息给\"+o.to,\"type\":\"success\",\"closable\":false}},[_vm._v(_vm._s(o.msg)+\"\\n        \")])],1):_vm._e(),_vm._v(\" \"),(o.from=='NOTICE'&&  o.type=='that')?_c('div',[_c('el-alert',{attrs:{\"title\":\"NOTICE发送信息给\"+o.to,\"type\":\"error\",\"closable\":false}},[_vm._v(_vm._s(o.msg)+\"\\n        \")])],1):_vm._e(),_vm._v(\" \"),(o.from != 'NOTICE' &&  o.type=='that')?_c('div',[_c('el-alert',{attrs:{\"title\":\"接收来自\"+o.from+\"的信息\",\"type\":\"warning\",\"closable\":false}},[_vm._v(_vm._s(o.msg)+\"\\n        \")])],1):_vm._e()])})],2),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-switch',{attrs:{\"active-text\":\"单聊\",\"inactive-text\":\"群发\"},model:{value:(_vm.p2p),callback:function ($$v) {_vm.p2p=$$v},expression:\"p2p\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',[_c('el-row',{attrs:{\"gutter\":20,\"type\":\"flex\",\"justify\":\"center\"}},[(_vm.p2p==1)?_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"张三？\",\"clearable\":\"\"},model:{value:(_vm.selectChat),callback:function ($$v) {_vm.selectChat=$$v},expression:\"selectChat\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.chatmsg),callback:function ($$v) {_vm.chatmsg=$$v},expression:\"chatmsg\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.send}},[_vm._v(\"发送\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4a3afb2d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a3afb2d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a3afb2d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4a3afb2d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chat.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <el-row :gutter=\"20\" type=\"flex\" justify=\"center\">\n      <el-col :span=\"9\">\n        <chat :uid=\"100\" :gid=\"100\" :name=\"111\" />\n      </el-col>\n      <el-col :span=\"9\">\n        <chat  :uid=\"101\" :gid=\"101\" :name=\"222\" />\n      </el-col>\n      <el-col :span=\"9\">\n        <chat  :uid=\"102\" :gid=\"100\" :name=\"333\"/>\n      </el-col>\n    </el-row>\n    <br>\n    <br>\n    <el-button type=\"danger\" @click=\"dialogFormVisible = true\">发送全局通知</el-button>\n    <el-dialog title=\"全局通知\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\">\n        <el-form-item label=\"发送内容\">\n          <el-input v-model=\"form.msg\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"发送类型\">\n          <el-select v-model=\"form.type\" placeholder=\"请选择活动区域\">\n            <el-option label=\"应用内全局通知\" value=\"3\"></el-option>\n            <el-option label=\"群内全局通知\" value=\"2\"></el-option>\n            <el-option label=\"群内单点通知\" value=\"4\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"Uid\" v-if=\"form.type==4\">\n          <el-input v-model=\"form.uid\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Gid\" v-if=\"form.type!=3\">\n          <el-input v-model=\"form.gid\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"sendNotice\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport chat from './components/chat'\nimport axios from 'axios'\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      dialogFormVisible: false,\n      form: {\n        type: \"2\"\n      }\n\n    }\n  },\n  components: {\n    chat\n  },\n  methods: {\n    sendNotice() {\n      this.dialogFormVisible = false\n\n      let params = new FormData();\n\n      params.append('sendtype', parseInt(this.form.type));\n      params.append('msg', this.form.msg);\n      params.append('gid', this.form.gid);\n      params.append('uid', this.form.uid);\n\n      axios.post('/chat/notice', params).then(function(response) {\n\n          this.$message({\n            showClose: true,\n            message: '发送成功',\n            type: 'success'\n          });\n\n        })\n\n        .catch(function(error) {\n          this.$message({\n            showClose: true,\n            message: '发送出错',\n            type: 'error'\n          });\n\n        })\n    }\n  }\n}\n\n</script>\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-row',{attrs:{\"gutter\":20,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":9}},[_c('chat',{attrs:{\"uid\":100,\"gid\":100,\"name\":111}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":9}},[_c('chat',{attrs:{\"uid\":101,\"gid\":101,\"name\":222}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":9}},[_c('chat',{attrs:{\"uid\":102,\"gid\":100,\"name\":333}})],1)],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"发送全局通知\")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"全局通知\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"发送内容\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.form.msg),callback:function ($$v) {_vm.$set(_vm.form, \"msg\", $$v)},expression:\"form.msg\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},[_c('el-option',{attrs:{\"label\":\"应用内全局通知\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"群内全局通知\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"群内单点通知\",\"value\":\"4\"}})],1)],1),_vm._v(\" \"),(_vm.form.type==4)?_c('el-form-item',{attrs:{\"label\":\"Uid\"}},[_c('el-input',{model:{value:(_vm.form.uid),callback:function ($$v) {_vm.$set(_vm.form, \"uid\", $$v)},expression:\"form.uid\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.form.type!=3)?_c('el-form-item',{attrs:{\"label\":\"Gid\"}},[_c('el-input',{model:{value:(_vm.form.gid),callback:function ($$v) {_vm.$set(_vm.form, \"gid\", $$v)},expression:\"form.gid\"}})],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendNotice}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-03401f62\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-03401f62\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-03401f62\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// // The Vue build version to load with the `import` command\n// // (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n// import Vue from 'vue'\n// import App from './App'\n\n// Vue.config.productionTip = false\n\n// /* eslint-disable no-new */\n// new Vue({\n//   el: '#app',\n//   components: { App },\n//   template: '<App/>'\n// })\nimport Vue from 'vue'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport App from './App.vue'\n\nVue.use(ElementUI)\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}